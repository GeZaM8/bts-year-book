(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[205],{4652:(e,a,s)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var s in a)Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}(a,{default:function(){return d},getImageProps:function(){return n}});let t=s(8140),l=s(5040),r=s(1356),i=t._(s(1124));function n(e){let{props:a}=(0,l.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(a))void 0===s&&delete a[e];return{props:a}}let d=r.Image},5321:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>d});var t=s(5155),l=s(2115),r=s(2983),i=s(4652),n=s.n(i);function d(){let[e,a]=(0,l.useState)({message:"",type:null}),[s,i]=(0,l.useState)(null),[d,o]=(0,l.useState)(null),[c,m]=(0,l.useState)({id:"",name:"",tanggal_lahir:"",media_sosial:[],hobi:"",quotes:""}),u=(0,l.useCallback)(()=>{m({id:"",name:"",tanggal_lahir:"",media_sosial:[],hobi:"",quotes:""}),o(null),i(null)},[]),x=(0,l.useCallback)(e=>{var a;let s=null==(a=e.target.files)?void 0:a[0];if(s){o(s);let e=new FileReader;e.onloadend=()=>i(e.result),e.readAsDataURL(s)}},[]),p=(0,l.useCallback)((e,a)=>{m(s=>({...s,[e]:a}))},[]),g=(0,l.useCallback)((e,a,s)=>{m(t=>{let l=[...t.media_sosial];return l[e][a]=s,{...t,media_sosial:l}})},[]),h=(0,l.useCallback)(()=>{m(e=>e.media_sosial.length>=5?e:{...e,media_sosial:[...e.media_sosial,{id:Date.now().toString(),app:"",username:""}]})},[]),b=(0,l.useCallback)(e=>{m(a=>{let s=[...a.media_sosial];return s.splice(e,1),{...a,media_sosial:s}})},[]),f=(0,l.useCallback)(async e=>{e.preventDefault();let s=new FormData;s.append("name",c.name),s.append("tanggal_lahir",c.tanggal_lahir),s.append("hobi",c.hobi),s.append("quotes",c.quotes),d&&s.append("foto",d),c.media_sosial.forEach((e,a)=>{s.append("media_sosial[".concat(a,"][app]"),e.app),s.append("media_sosial[".concat(a,"][username]"),e.username)});try{if(!(await fetch("/api/siswa",{method:"POST",body:s})).ok)throw Error("Gagal simpan data");a({message:"Data berhasil disimpan!",type:"success"}),u()}catch(e){a({message:"Terjadi kesalahan saat menyimpan data",type:"error"})}finally{setTimeout(()=>a({message:"",type:null}),3e3)}},[c,d,u]);return(0,t.jsxs)("div",{className:"relative min-h-screen overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('/image1.jpg')"}}),(0,t.jsx)("div",{className:"fixed min-h-screen w-full inset-0 bg-black/40"}),(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen py-12 px-2 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"relative z-10 max-w-2xl mx-auto bg-white rounded-xl overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-blue-600 p-5 text-white text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)(r.E3I,{className:"w-6 h-6 text-blue-100"}),(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Form Data Siswa"})]}),(0,t.jsx)("p",{className:"text-sm text-blue-100 mt-1",children:"Isi data diri dengan lengkap"})]}),(0,t.jsxs)("form",{onSubmit:f,className:"p-6 space-y-6",children:[e.type&&(0,t.jsx)("div",{className:"fixed top-8 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded shadow-md text-white transition-all duration-500 ".concat("success"===e.type?"bg-green-500":"bg-red-500"," ").concat(e.type?"opacity-100":"opacity-0"),children:e.message}),(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)("input",{type:"file",id:"foto",className:"hidden",accept:"image/*",onChange:x,required:!0}),(0,t.jsx)("label",{htmlFor:"foto",className:"w-28 h-28 border border-gray-300 rounded-full flex items-center justify-center overflow-hidden cursor-pointer hover:border-blue-400",children:s?(0,t.jsx)(n(),{src:"/uploads/".concat(s),alt:"preview",width:112,height:112,className:"w-full h-full object-cover"}):(0,t.jsx)(r.i7d,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 mt-2",children:["Upload Foto Formal ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-1",children:[(0,t.jsx)(r.KJW,{className:"w-4 h-4 text-blue-500"})," Nama Lengkap ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:c.name,onChange:e=>p("name",e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-800 placeholder-gray-300",placeholder:"Nama Lengkap"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-1",children:[(0,t.jsx)(r.VvS,{className:"w-4 h-4 text-blue-500"})," Tanggal Lahir ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"date",value:c.tanggal_lahir,onChange:e=>p("tanggal_lahir",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-gray-800",required:!0})]}),(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,t.jsx)(r.N_E,{className:"w-4 h-4 text-blue-500"})," Media Sosial"]}),(0,t.jsxs)("button",{type:"button",onClick:h,disabled:c.media_sosial.length>=5,className:"flex items-center gap-1 text-xs px-2 py-1 rounded-md ".concat(c.media_sosial.length>=5?"bg-gray-200 text-gray-400":"bg-blue-500 text-white hover:bg-blue-600"),children:[(0,t.jsx)(r.FWt,{className:"w-3 h-3"})," Tambah"]})]}),0===c.media_sosial.length&&(0,t.jsx)("p",{className:"text-center text-xs text-gray-400 italic",children:"Belum ada media sosial"}),c.media_sosial.map((e,a)=>(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700",children:[(0,t.jsx)(r.N_E,{className:"w-4 h-4 text-blue-500"})," ",a+1]}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"text",placeholder:"Aplikasi",value:e.app,onChange:e=>g(a,"app",e.target.value),className:"w-full px-2 py-1 border border-gray-300 text-gray-800 placeholder-gray-300 rounded-md focus:ring-blue-500"})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"text",placeholder:"Username",value:e.username,onChange:e=>g(a,"username",e.target.value),className:"w-full px-2 py-1 border border-gray-300 text-gray-800 placeholder-gray-300 rounded-md focus:ring-blue-500"})}),(0,t.jsx)("button",{type:"button",onClick:()=>b(a),className:"text-red-500 hover:text-red-600",children:(0,t.jsx)(r.TBR,{className:"w-4 h-4"})})]},e.id)),c.media_sosial.length>=5&&(0,t.jsx)("p",{className:"text-xs text-gray-400 italic",children:"Mau tambah? Jangan maruk, maksimal 5 media sosial ya!"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-1",children:[(0,t.jsx)(r.B1N,{className:"w-4 h-4 text-blue-500"})," Hobi ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:c.hobi,onChange:e=>p("hobi",e.target.value),className:"w-full px-3 py-2 border border-gray-300 text-gray-800 placeholder-gray-300 rounded-md focus:ring-blue-500",required:!0,placeholder:"Contoh: Membaca buku sambil terbang"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-1",children:[(0,t.jsx)(r.oFn,{className:"w-4 h-4 text-blue-500"})," Quotes Favorit ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{value:c.quotes,onChange:e=>p("quotes",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 text-gray-800 placeholder-gray-300",required:!0,placeholder:"Contoh: Tetap menyerah, jangan semangat - Sapiderman"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-red-500",children:[(0,t.jsx)(r.RIJ,{className:"w-4 h-4"})," Hayo, jangan asal nulis ya! Data yang udah tersimpan susah diubah, jadi pastikan kamu tetiti dan isi data yang benar!"]}),(0,t.jsxs)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 flex items-center justify-center gap-2",onClick:()=>{c.name&&c.tanggal_lahir&&(null===s&&a({type:"error",message:"Harap pilih foto terlebih dahulu!"}),setTimeout(()=>a({message:"",type:null}),3e3))},children:[(0,t.jsx)(r.tXn,{className:"w-4 h-4"})," Simpan Data"]})]})]})})]})}},7952:(e,a,s)=>{Promise.resolve().then(s.bind(s,5321))}},e=>{e.O(0,[159,356,441,255,358],()=>e(e.s=7952)),_N_E=e.O()}]);